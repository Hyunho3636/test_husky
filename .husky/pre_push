#!/usr/bin/env node

const exec = require('child_process').execSync;

// í˜„ì¬ pushí•˜ë ¤ëŠ” ë¸Œëœì¹˜ ì´ë¦„ ê°€ì ¸ì˜¤ê¸°
const currentBranch = exec('git rev-parse --abbrev-ref HEAD').toString().trim();

// ë³´í˜¸í•  ë¸Œëœì¹˜ ëª©ë¡
const protectedBranches = ['main', 'develop'];

// í˜„ì¬ ë¸Œëœì¹˜ê°€ ë³´í˜¸ëœ ë¸Œëœì¹˜ì¸ì§€ í™•ì¸
if (protectedBranches.includes(currentBranch)) {
  console.error('\x1b[31m%s\x1b[0m', `ğŸš« ${currentBranch} ë¸Œëœì¹˜ë¡œ ì§ì ‘ pushí•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.`);
  console.log('Pull Requestë¥¼ í†µí•´ ì½”ë“œë¥¼ ë³‘í•©í•´ì£¼ì„¸ìš”.');
  process.exit(1);
}

process.exit(0);